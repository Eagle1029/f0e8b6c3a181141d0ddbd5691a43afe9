"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8543],{68543:function(e,t,a){a.r(t);var s=a(85893),o=a(83253),l=a.n(o),r=a(94184),n=a.n(r),i=a(83480),u=a(69316),c=a(27982),d=a(97787),m=a(19870),h=a(88208),p=a(71667),x=a.n(p),b=a(67294),y=a(2664),f=a(34558),g=a(86501),j=a(40975),R=a(64709);l().setAppElement("#__next"),t.default=(0,y.$j)(e=>({user:e.auth.user,showRobuxDeposit:e.auth.showRobuxDeposit,lastSessionRefresh:e.auth.lastSessionRefresh}))(function(e){let{className:t,showRobuxDeposit:a,lastSessionRefresh:o,user:r}=e,p=(0,y.I0)(),[Z,v]=(0,b.useState)(!1),[D,w]=(0,b.useState)(10),[N,M]=(0,b.useState)(0),[C,I]=(0,b.useState)(!1),[k,P]=(0,b.useState)(),[T,B]=(0,b.useState)([10,15,20,25,30]),S=b.useMemo(()=>(0,h.P)("margin"),["margin"]),fetchData=async()=>{I(!0);try{let e=await (0,f.C6)(),t=await (0,f.nX)(),a=Math.max(D,10);t.user.liquidityRemaining>=10&&(a=t.user.liquidityRemaining),w(a),P(e.rbx),M(t.user.liquidityRemaining),B([Math.floor(e.rbx/4),Math.floor(e.rbx/3),Math.floor(e.rbx/2),Math.floor(e.rbx)]),I(!1)}catch(e){console.log(e),I(!1),e.response&&400===e.response.status?g.ZP.error(e.response.data.error):g.ZP.error("There was an error while fetching your RBLX information. Please try again later!")}};function closeModal(){p({type:m.Tk}),p({type:m.Mr}),v(!1),document.body.style.overflow="initial",document.body.style.paddingRight="0px"}(0,b.useEffect)(()=>{Z&&fetchData()},[r,Z]),(0,b.useEffect)(()=>{Z&&fetchData()},[o]),(0,b.useEffect)(()=>{a?(v(!0),fetchData(),setTimeout(()=>{document.body.style.overflow="hidden",document.body.style.paddingRight=S.gap+"px"},0)):!1===a&&closeModal()},[a]);let handleRobuxDeposit=async e=>{try{if(void 0!==k&&e>k){g.ZP.error("You don't have that much robux");return}if(e<10&&e>0){g.ZP.error("You have to liquidate at least 10 robux!");return}I(!0);let t=await (0,f.RZ)(e);if(I(!1),t.success)g.ZP.success(t.msg);else{g.ZP.error(t.msg);return}w(e),M(e)}catch(e){I(!1),e.response&&400===e.response.status?g.ZP.error(e.response.data.error):g.ZP.error("There was an error while updating your R$ liquidation information. Please try again later!")}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l(),{isOpen:Z,onRequestClose:closeModal,contentLabel:"Replenishment modal",className:n()(x().defaultModal,x().modalDeposit,t),closeTimeoutMS:200,children:[(0,s.jsxs)("div",{className:x().defaultModalBreadcrumbs,children:[(0,s.jsx)(i.Z,{className:x().defaultModalBreadcrumbsItem,children:(0,s.jsx)(u.Z,{onClick:closeModal,element:"span",textType:"labelsRegular",children:"Deposit"})}),(0,s.jsx)(i.Z,{className:x().defaultModalBreadcrumbsItem,children:(0,s.jsx)(u.Z,{element:"span",textType:"labelsRegular",children:"Robux"})})]}),(0,s.jsx)(c.Z,{style:{margin:".3em 0 1em 0"},element:"h2",className:x().modalDepositTitle,children:"Deposit Robux"}),-1===k?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:x().modalDepositOptions,children:r&&r._fromGameAuth?(0,s.jsxs)(u.Z,{element:"p",textType:"regular16",className:x().modalDepositOptionsLabel,children:["It is not possible to deposit Robux from your Roblox account when you have authenticated by joining our verification game.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Bloxflip needs access to your Roblox account to automatically buy gamepasses on your behalf.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"You're able to set the maximum amount of Robux that you want to deposit, and our system won't take more than it.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(i.Z,{onClick:()=>{p({type:m.gr})},variant:"primary",className:x().modalDepositButton,children:"Login securely to my Roblox account"})]}):(0,s.jsxs)(u.Z,{element:"p",textType:"regular16",className:x().modalDepositOptionsLabel,children:["It seems that your Roblox session has been ",(0,s.jsx)("u",{children:"invalidated"}),". This can happen if you change your Roblox security settings or if you logout from all other devices.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"In order to continue with your deposit, you will have to login again to your Roblox account.",(0,s.jsx)(i.Z,{onClick:()=>{p({type:m.gr})},variant:"primary",className:x().modalDepositButton,children:"Login securely to my Roblox account"})]})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:n()("customInput",x().modalDepositInput),children:[(0,s.jsx)(u.Z,{element:"p",textType:"labelsRegular",className:n()("customInputLabel"),children:"Amount of Robux"}),(0,s.jsxs)("div",{className:n()("customInputInner"),children:[(0,s.jsx)(d.Z,{hasCurrencyIcon:!0,placeholder:"Enter Amount of Robux",value:D,type:"number",onChange:e=>w(parseInt(e.target.value))}),(0,s.jsx)("div",{className:n()("customInputInnerButtons"),children:T.map((e,t)=>(0,s.jsx)(i.Z,{disabled:C,onClick:()=>w(e),variant:"inputButton",children:(0,j.Z)((0,R.Z)(e))},t))})]})]}),(0,s.jsx)(i.Z,{onClick:()=>handleRobuxDeposit(D),variant:"primary",disabled:C,className:x().modalDepositButton,children:C?"Please wait...":N>=10?"Update Robux":"Deposit Robux"}),N>=10&&!C&&(0,s.jsx)(i.Z,{onClick:()=>handleRobuxDeposit(0),variant:"danger",style:{marginLeft:"1rem"},disabled:C,className:x().modalDepositButton,children:C?"Please wait...":"Cancel deposit"})]}),(0,s.jsx)(i.Z,{onClick:closeModal,className:x().defaultModalClose,"aria-label":"Close"})]})})})}}]);