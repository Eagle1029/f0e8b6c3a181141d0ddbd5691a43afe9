(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6525],{6525:function(e,a,r){"use strict";r.d(a,{HS:function(){return A}});var l=r(85893),c=r(25545),t=r(83480),s=r(27982),d=r(69316),i=r(66713),o=r(64709),n=r(40975),p=r(94184),k=r.n(p),_=r(67294),u=r(25514),b=r.n(u),g=r(21950),m=r(11163),j=r(34558),f=r(43246),h=r(86501),y=r(33900),C=r(2664),v=r(62557),T=r(19870),N=r(1277);let A=[,,,].fill("").map((e,a)=>"default".concat(a+1));a.ZP=()=>{let e=(0,m.useRouter)(),a=(0,C.I0)(),[r,p]=(0,_.useState)(0),u=(0,N.Z)().width<456,x=(0,C.v9)(e=>e.auth.bjTables),E=(0,C.v9)(e=>e.auth.user),S=(0,C.v9)(e=>e.auth.fflags),updateTables=e=>{a({type:T.C_,payload:structuredClone(e)})},totalBets=e=>{var a;return null!==(a=e&&e.reduce((e,a)=>e+a.bet,0))&&void 0!==a?a:[]},parseTime=e=>{let a=new Date(e).getTime();return a},joinEmptyColor=async r=>{try{if(!E)throw a({type:T.gr}),Error("You must be logged in to join this table");if(x){for(let a of x)if(a.id===r){let r=g.f5.find(e=>!a.players.find(a=>a.color===e));if(r){let l={bet:a.minimumBet,gameId:a.id,playerColor:r,playerId:null==E?void 0:E.robloxId},c=await (0,j.U9)(l);c.success?(h.ZP.success("Joined the game successfully"),e.push("/blackjack/".concat(a.id))):h.ZP.error("Failed to join the game")}break}}}catch(e){var l;console.log(e),h.ZP.error(null!==(l=e.message)&&void 0!==l?l:"Something went wrong")}},setSockets=()=>{y.$E.on("game-timer-updated",e=>{try{"string"==typeof e&&(e=JSON.parse(e));let a=structuredClone(v.Z.getState().auth.bjTables);if(a&&Array.isArray(a)){let r=!1;for(let l=0;l<a.length;l++)if(a[l]&&a[l].id===e.gameId){a[l].startsRoundAt=e.startsRoundAt,a[l].endsAt=e.endsAt,r=!0;break}r&&updateTables(a)}}catch(e){console.log(e)}}),y.$E.on("game-replaced",async e=>{try{if(!e)return;"string"==typeof e&&(e=JSON.parse(e));let r=structuredClone(v.Z.getState().auth.bjTables);if(r&&Array.isArray(r)){let l=!1;for(let c=0;c<r.length;c++)if(r[c]&&r[c].id===e.oldGameId){var a;l=!0,r[c]={...r[c],status:"WAITING_FOR_PLAYERS",dealerCards:[],id:e.gameId,players:null!==(a=e.players)&&void 0!==a?a:[],maximumBet:e.maxBet,minimumBet:e.minBet,startsRoundAt:parseTime(e.startsRoundAt)};break}l&&updateTables(r)}}catch(e){console.log(e)}}),y.$E.on("game-not-replaced",async e=>{try{if(!e)return;"string"==typeof e&&(e=JSON.parse(e));let a=structuredClone(v.Z.getState().auth.bjTables);if(a&&Array.isArray(a)){for(let r=0;r<a.length;r++)if(a[r]&&a[r].id===e.gameId){a.splice(r,1);break}}}catch(e){console.log(e)}}),y.$E.on("game-started",e=>{"string"==typeof e&&(e=JSON.parse(e));let a=structuredClone(v.Z.getState().auth.bjTables);if(a&&Array.isArray(a)){let l=!1;for(let c=0;c<a.length;c++)if(a[c]&&a[c].id===e.gameId){var r;let t=e.tour1[e.tour1.length-1];a[c].dealerCards=[{isDealer:!0,suit:t.card.suit,value:t.card.value,faceUp:t.card.faceUp},{isDealer:!0,suit:"NONE",value:-1,faceUp:!1,hidden:!0},,],a[c]=Object.assign({},null!==(r=a[c])&&void 0!==r?r:{},{status:"IN_PROGRESS"}),l=!0;break}l&&updateTables(a)}}),y.$E.on("player-joined",e=>{try{"string"==typeof e&&(e=JSON.parse(e));let l=structuredClone(v.Z.getState().auth.bjTables);if(l&&Array.isArray(l)){let c=!1;for(let t=0;t<l.length;t++)if(l[t]&&l[t].id===e.gameId){var a,r;l[t]=Object.assign({},null!==(a=l[t])&&void 0!==a?a:{},{players:(null!==(r=l[t].players)&&void 0!==r?r:[]).concat({robloxId:e.playerId,bet:e.bet,color:e.playerColor})}),c=!0;break}c&&updateTables(l)}}catch(e){console.log(e)}}),y.$E.on("player-left",async e=>{try{"string"==typeof e&&(e=JSON.parse(e));let l=structuredClone(v.Z.getState().auth.bjTables);if(l&&Array.isArray(l)){let c=!1;for(let t=0;t<l.length;t++)if(l[t]&&l[t].id===e.gameId){var a,r;l[t]=Object.assign({},null!==(a=l[t])&&void 0!==a?a:{},{players:(null!==(r=l[t].players)&&void 0!==r?r:[]).filter(a=>a.color!==e.playerColor)}),c=!0;break}c&&updateTables(l)}}catch(e){console.log(e)}}),y.$E.on("dealer-cards-revealed",e=>{try{"string"==typeof e&&(e=JSON.parse(e));let a=structuredClone(v.Z.getState().auth.bjTables);if(a&&Array.isArray(a)){let r=!1;for(let l=0;l<a.length;l++)if(a[l]&&a[l].id===e.gameId){let c=a[l].dealerCards;for(let t=0;t<c.length;t++){let s=c[l];if("NONE"===s.suit){a[l].dealerCards[t].suit=e.card.suit,a[l].dealerCards[t].value=e.card.value,a[l].dealerCards[t].faceUp=e.card.faceUp,a[l].dealerCards[t].hidden=!1,r=!0;break}}}r&&updateTables(a)}}catch(e){console.log(e)}})};(0,_.useEffect)(()=>((async()=>{try{let e=await (0,j.Ql)();if(e&&e.success){let a=localStorage.getItem("blackjack-table-type");a&&a.match(/^[0-9]+$/g)&&p(parseInt(a)%2);for(let a=0;a<e.games.length;a++){let r=e.games[a];r.startsRoundAt=parseTime(r.startsRoundAt),r.endsAt=parseTime(r.endsAt),r.startsAt=parseTime(r.startsAt),e.games[a].dfcs=Array(6).fill(null).map(()=>~~(3*Math.random()));for(let l=0;l<r.dealerCards.length;l++){let c=r.dealerCards[l];e.games[a].dealerCards[l]={...c,isDealer:!0,hidden:"NONE"===c.suit}}}updateTables(structuredClone(e.games)),setSockets()}}catch(e){updateTables(!1),console.log(e),h.ZP.error("Failed to load blackjack tables, check console for more info")}})(),()=>{updateTables(null),y.$E.off("game-replaced"),y.$E.off("game-started"),y.$E.off("game-not-replaced"),y.$E.off("player-joined"),y.$E.off("player-left"),y.$E.off("dealer-cards-revealed")}),[]);let fillEmptyPlayers=e=>[,,,,,].fill(null).map((a,r)=>e&&r in e?e[r]:null),handleClick=e=>{p(e),localStorage.setItem("blackjack-table-type",String(e))};return S&&"fe_blackjack_enabled"in S&&S.fe_blackjack_enabled&&(0,l.jsxs)("div",{className:b().mainBJPreview,children:[(0,l.jsxs)("div",{className:b().devider,children:[(0,l.jsxs)(s.Z,{element:"h3",className:b().titleHeader,children:[(0,l.jsx)("span",{children:"Blackjack"}),!u&&(0,l.jsxs)("span",{className:b().tablesTitle,children:["(",x&&Array.isArray(x)?x.length:"--"," ","Tables)"]})]}),(0,l.jsx)("div",{className:b().switcherButtons,children:["All tables","Hide full tables"].map((e,a)=>(0,l.jsx)(t.Z,{onClick:()=>handleClick(a),className:k()(b().switcherButton,a===r?b().active:null),children:e},a))})]}),x?x.length&&x.filter(e=>"ENDED"!==e.status).length?(0,l.jsx)("div",{className:b().tablesCards,children:x.sort((e,a)=>"WAITING_FOR_PLAYERS"===e.status?1:(a.status,0)).sort((e,a)=>e.minimumBet>a.minimumBet?1:e.minimumBet<a.minimumBet?-1:0).map((a,s)=>{var p;return!(1===r&&a.players.length>=5)&&(0,l.jsxs)("div",{className:b().tableCard,onClick:()=>e.push("/blackjack/".concat(a.id)),children:[(0,l.jsxs)("div",{className:b().devider,children:[(0,l.jsxs)(d.Z,{element:"span",className:b().amountCollected,textType:"regular16",children:[(0,n.Z)((0,o.Z)(totalBets(a.players))),(0,l.jsx)(i.Z,{})]}),(0,l.jsxs)(t.Z,{variant:"primary",className:b().betJoinButton,onClick:()=>joinEmptyColor(a.id),disabled:"WAITING_FOR_PLAYERS"!==a.status||a.players.length>=5,children:["Join for ",null!==(p=a.minimumBet)&&void 0!==p?p:0," ",(0,l.jsx)(i.Z,{})]})]}),(0,l.jsxs)("div",{className:b().cardsPreview,children:[(0,l.jsx)("div",{className:b().shadowBehind}),(0,l.jsx)("div",{className:b().cardsCenter,children:(a.dealerCards&&a.dealerCards.length?a.dealerCards:[,,].fill({suit:"NONE",value:0,hidden:!0})).map((e,r)=>(0,l.jsxs)("div",{id:"card-".concat(r,"-table-").concat(s),className:k()(b().card,e.hidden&&b().hidden),children:[(0,l.jsx)("img",{src:"NONE"===e.suit?g.pT[A[a.dfcs[r]]]:(0,g.gG)(e.suit,e.value),className:b().pokerCard,alt:""}),(0,l.jsx)("img",{src:g.pT[A[a.dfcs[r]]],className:b().defaultPokerCard,alt:""})]},r))})]}),(0,l.jsx)("div",{className:b().finalWrap,children:(0,l.jsxs)("div",{className:b().devider,children:[(0,l.jsx)("div",{className:b().players,children:fillEmptyPlayers(a.players).map((e,a)=>{var r;return(0,l.jsx)("div",{className:k()(b().gamePlayer,null===e&&b().empty),children:e&&(0,l.jsx)(c.Z,{className:k()(b().gamePlayer,b()[(e.color||(0,g.dK)(e.robloxId)).toLowerCase()]),userId:Number(e.robloxId),isPrivateMode:(null!==(r=e.username)&&void 0!==r?r:"")==="Anonymous",imageAlt:"User avatar",boxSize:"medium",color:"#fff"})},a)})}),(0,l.jsx)(d.Z,{element:"span",className:b().playersCount,textType:"regular16",children:"IN_PROGRESS"===a.status?"In progress..":(0,l.jsx)(l.Fragment,{children:"Waiting for players..."})})]})})]},s)})}):(0,l.jsx)(d.Z,{textType:"regular14",element:"span",className:b().textFailed,children:"There are no tables available at the moment"}):!1===x?(0,l.jsx)(d.Z,{textType:"regular14",element:"span",className:b().textFailed,children:"Failed to load blackjack tables"}):(0,l.jsx)(f.Z,{radius:30,isBlue:!0,centered:!0})]})||null}},21950:function(e,a,r){"use strict";r.d(a,{NM:function(){return getBestTotal},_K:function(){return t},dK:function(){return colorById},f5:function(){return c},gA:function(){return s},gG:function(){return handleCard},pT:function(){return l}});let l={c10:"/pics/pokercards/c10.png",c2:"/pics/pokercards/c2.png",c3:"/pics/pokercards/c3.png",c4:"/pics/pokercards/c4.png",c5:"/pics/pokercards/c5.png",c6:"/pics/pokercards/c6.png",c7:"/pics/pokercards/c7.png",c8:"/pics/pokercards/c8.png",c9:"/pics/pokercards/c9.png",c1:"/pics/pokercards/ca.png",c11:"/pics/pokercards/cj.png",c13:"/pics/pokercards/ck.png",c12:"/pics/pokercards/cq.png",d10:"/pics/pokercards/d10.png",d2:"/pics/pokercards/d2.png",d3:"/pics/pokercards/d3.png",d4:"/pics/pokercards/d4.png",d5:"/pics/pokercards/d5.png",d6:"/pics/pokercards/d6.png",d7:"/pics/pokercards/d7.png",d8:"/pics/pokercards/d8.png",d9:"/pics/pokercards/d9.png",d1:"/pics/pokercards/da.png",d11:"/pics/pokercards/dj.png",d13:"/pics/pokercards/dk.png",d12:"/pics/pokercards/dq.png",h10:"/pics/pokercards/h10.png",h2:"/pics/pokercards/h2.png",h3:"/pics/pokercards/h3.png",h4:"/pics/pokercards/h4.png",h5:"/pics/pokercards/h5.png",h6:"/pics/pokercards/h6.png",h7:"/pics/pokercards/h7.png",h8:"/pics/pokercards/h8.png",h9:"/pics/pokercards/h9.png",h1:"/pics/pokercards/ha.png",h11:"/pics/pokercards/hj.png",h13:"/pics/pokercards/hk.png",h12:"/pics/pokercards/hq.png",s10:"/pics/pokercards/s10.png",s2:"/pics/pokercards/s2.png",s3:"/pics/pokercards/s3.png",s4:"/pics/pokercards/s4.png",s5:"/pics/pokercards/s5.png",s6:"/pics/pokercards/s6.png",s7:"/pics/pokercards/s7.png",s8:"/pics/pokercards/s8.png",s9:"/pics/pokercards/s9.png",s1:"/pics/pokercards/sa.png",s11:"/pics/pokercards/sj.png",s13:"/pics/pokercards/sk.png",s12:"/pics/pokercards/sq.png",default:"/pics/pokercards/default/default.png",default1:"/pics/pokercards/default/default1.png",default2:"/pics/pokercards/default/default2.png",default3:"/pics/pokercards/default/default3.png"},c=["PINK","BLUE","RED","YELLOW","ORANGE"],t={PINK:"#AF3BD8",BLUE:"#3656FF",RED:"#F03276",YELLOW:"#FCB122",ORANGE:"#FF774C"},colorById=e=>c["number"==typeof e?e:parseInt(e.slice(-1))%c.length],s=["one","two","three","four","five","six"],handleCard=function(e,a){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],t=e.slice(0,1).toLocaleLowerCase()+a;return c?r&&"NONE"===e?"default":t:l["NONE"===e?r?"default":"default"+[1,2,3][Math.floor(3*Math.random())]:t]},getBestTotal=e=>getTotalScore(e).filter(e=>e<=21).reduce((e,a)=>Math.max(e,a),0),getTotalScore=e=>{let a=0;for(let r of e.cards)1===r.value&&a++;let r=[];for(let l=0;l<=a;l++)r.push(getTotalWithAcesAs11(e,l));return r},getTotalWithAcesAs11=(e,a)=>{let r=0;for(let l of e.cards)1===l.value?a>0?(r+=11,a--):r+=1:r+=Math.min(l.value,10);return r}},25514:function(e){e.exports={flash:"blackjack_flash__Tm7ph",pulse:"blackjack_pulse__OJUZQ",deviderBet:"blackjack_deviderBet__BeAqN",textFailed:"blackjack_textFailed__kARCW",textFailedPlayers:"blackjack_textFailedPlayers__vaOtG",card:"blackjack_card__DrvQb",dealerDefault:"blackjack_dealerDefault__uCSYV",bottomTopFlip:"blackjack_bottomTopFlip__i2_Lm",flipCard:"blackjack_flipCard__ff_Zi",hidden:"blackjack_hidden__JkWQe",tipQuestion:"blackjack_tipQuestion__k_hdt",scoreCard:"blackjack_scoreCard__ja80r",pink:"blackjack_pink__tYGyV",yellow:"blackjack_yellow___faAm",blue:"blackjack_blue__pjHIu",red:"blackjack_red__HKhxf",orange:"blackjack_orange__epKk_",pokerCard:"blackjack_pokerCard___HmrS",dealerDefaultPokerCard:"blackjack_dealerDefaultPokerCard__hV71a",defaultPokerCard:"blackjack_defaultPokerCard___LFhV",mainBJPreview:"blackjack_mainBJPreview__eU0AD",titleHeader:"blackjack_titleHeader__L1alH",tablesTitle:"blackjack_tablesTitle__MSCny",switcherButtons:"blackjack_switcherButtons__Ekc1y",switcherButton:"blackjack_switcherButton__lrCme",active:"blackjack_active__QL5gr",devider:"blackjack_devider__tb9A_",tablesCards:"blackjack_tablesCards__5iGej",tableCard:"blackjack_tableCard__KU9yr",amountCollected:"blackjack_amountCollected__a3MT1",betJoinButton:"blackjack_betJoinButton__qnSH_",cardsPreview:"blackjack_cardsPreview__r5GgD",shadowBehind:"blackjack_shadowBehind__p_LQ_",cardsCenter:"blackjack_cardsCenter__8BOqC",finalWrap:"blackjack_finalWrap__8agGm",players:"blackjack_players__1kIdc",gamePlayer:"blackjack_gamePlayer__4wugs",empty:"blackjack_empty__1RjSY",visibilityButtton:"blackjack_visibilityButtton__7_YAm",blackjackGame:"blackjack_blackjackGame__4Ho0a",blackjackGameRules:"blackjack_blackjackGameRules__LWCcc",blackjackGameSound:"blackjack_blackjackGameSound__RAUA2",activeSound:"blackjack_activeSound__D_cL_",circleProgress:"blackjack_circleProgress__JpZh1",mobile:"blackjack_mobile__okaMu",tableWrap:"blackjack_tableWrap__3hdRc",decisionType:"blackjack_decisionType__RWX0P",table:"blackjack_table___GJ5r",tableInside:"blackjack_tableInside__Jb8jO",tableTopContent:"blackjack_tableTopContent__evSV_",buttonsDecision:"blackjack_buttonsDecision__gvYiO",balanceUsers:"blackjack_balanceUsers__81Ar9",dealerCardsMain:"blackjack_dealerCardsMain__GLtgz",pokenCardTable:"blackjack_pokenCardTable__bCqtg",titleFirst:"blackjack_titleFirst__GIyjl",description:"blackjack_description__czERm",mobilePosition:"blackjack_mobilePosition__JeiH8",mobilePositionScore:"blackjack_mobilePositionScore__cYxZ6",score:"blackjack_score__OjPBC",colorCircle:"blackjack_colorCircle__JvwBs",cardsAv:"blackjack_cardsAv__yguld",balanceUser:"blackjack_balanceUser__7jQl_",busted:"blackjack_busted__6MaC5",dealerCards:"blackjack_dealerCards__ZN9Tm",textSection:"blackjack_textSection__a4BH8",smallText:"blackjack_smallText__ZOaDb",scorePlayer:"blackjack_scorePlayer__m0coo",outOfGame:"blackjack_outOfGame__rtIJN",player:"blackjack_player__KbfGy",playerCheckMark:"blackjack_playerCheckMark__whM_8",avatarContainer:"blackjack_avatarContainer__NjfhT",itemShadow:"blackjack_itemShadow__yFWc2",winner:"blackjack_winner__HE8k6",crown:"blackjack_crown__nzOgp",questionCard:"blackjack_questionCard__yEZFH",playerLogout:"blackjack_playerLogout__JJmTk",labelTip:"blackjack_labelTip__ycqP1",one:"blackjack_one__RsWaZ",two:"blackjack_two__rmWOB",three:"blackjack_three__HSTKU",four:"blackjack_four__v385f",five:"blackjack_five__r3KEH",historyPayout:"blackjack_historyPayout__pl4EX",bottomTop:"blackjack_bottomTop__mdRwV",fade:"blackjack_fade__WpsDT",rotate:"blackjack_rotate__DYDfh",cupOut:"blackjack_cupOut__ArZfG"}}}]);