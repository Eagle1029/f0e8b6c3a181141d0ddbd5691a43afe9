(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8798],{62484:function(e,t,a){"use strict";var s,r=a(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",_extends({fill:"#8690bf",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 318.293 318.293",style:{enableBackground:"new 0 0 318.293 318.293"},xmlSpace:"preserve"},e),s||(s=r.createElement("path",{d:"M159.148 0c-52.696 0-95.544 39.326-95.544 87.662h47.736c0-22.007 21.438-39.927 47.808-39.927 26.367 0 47.804 17.92 47.804 39.927v6.929c0 23.39-10.292 34.31-25.915 50.813-20.371 21.531-45.744 48.365-45.744 105.899h47.745c0-38.524 15.144-54.568 32.692-73.12 17.368-18.347 38.96-41.192 38.96-83.592v-6.929C254.689 39.326 211.845 0 159.148 0zM134.475 277.996h49.968v40.297h-49.968z"})))}},63781:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crash",function(){return a(83413)}])},12341:function(e,t,a){"use strict";var s=a(85893),r=a(19870),n=a(94184),l=a.n(n),o=a(67294),c=a(2664),i=a(11706),u=a.n(i),m=a(1277);t.Z=o.memo(function(e){let{historyValues:t,forRoulette:a}=e,n=(0,m.Z)(),o=(0,c.I0)(),getProperColor=e=>e>2&&e<7?"gameLatestItemYellow":e>=7?"gameLatestItemBlue":"purple"===e?"gameLatestItemPurple":"red"===e?"gameLatestItemRed":"yellow"===e?"gameLatestItemYellow":"gameLatestItemNeutral",getRouletteX=e=>"purple"===e?"2X":"yellow"===e?"14X":"red"===e?"2x":void 0;return(null==t?void 0:t.length)?(0,s.jsx)("div",{className:l()(a&&u().rouletteGameLatest,"gameLatest gameLatestHorizontal",!a&&"lastestHistory"),children:(a?t.slice(-3):n.width<768?t.slice(-6):t.slice(-7)).map((e,t)=>{var a,n;return(0,s.jsx)("div",{onClick:()=>o({type:r.LE,payload:{...e,gameName:"roulette"}}),style:{cursor:"pointer"},className:l()("gameLatestItem ".concat(getProperColor(null!==(a=e.crashPoint)&&void 0!==a?a:e.winningColor))),children:null!==(n=e.crashPoint)&&void 0!==n?n:getRouletteX(e.winningColor)},t)})}):(0,s.jsx)(s.Fragment,{})})},27031:function(e,t,a){"use strict";a.d(t,{Z:function(){return GameLayout}});var s=a(85893),r=a(76633),n=a.n(r),l=a(94184),o=a.n(l),c=a(1277);let i={left:n().gameLayoutColumnLeft,right:n().gameLayoutColumnRight,row:n().gameLayoutColumnRow,anotherLeft:n().gameLayoutColumnAnotherLeft,anotherRight:n().gameLayoutColumnAnotherRight};function GameLayout(e){let{className:t,children:a,...r}=e;return(0,s.jsx)("div",{className:n().gameLayout,...r,children:a})}GameLayout.Column=function(e){let{type:t,className:a,children:r,customMobileOrder:l="initial",...u}=e,m=(0,c.Z)();return(0,s.jsx)("div",{className:o()(n().gameLayoutColumn,i[t],a),style:{order:m.width<993?l:"initial"},...u,children:r})}},83413:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return CrashPage}});var s=a(85893),r=a(67294),n=a(13021),l=a(49089),o=a(27031),c=a(33900),i=a(36005),u=a(2664),m=a(19870),h=a(86501),d=a(34558),g=a(94184),_=a.n(g),p=a(10990),f=a(69316),y=a(42833),x=a.n(y),C=a(12341),P=a(98130),j=a(66713),b=a(40975),v=a(64709);let S={Starting:2,InProgress:3,Over:4},w={Playing:1,CashedOut:2},G={default:.2,medium:2};function getChartLabels(e,t,a){let s=[];for(let r=0;r<e;r++)s[r]=t-a*(e-1-r);return s}let loadImage=e=>new Promise(t=>{let a=new Image;a.src=e,a.onload=()=>t(a)}),loadImages=e=>new Promise(async t=>{let a=await Promise.all(e.map(e=>loadImage(e)));t(a)}),I=[3,6,9,12,15,18,21],N=[1,1.4,1.8,2,2.4,2.8,3,3.2],setHistoryClassName=e=>e.crashPoint?e.crashPoint>2&&e.crashPoint<7?"gameLatestItemYellow":e.crashPoint>7?"gameLatestItemBlue":"gameLatestItemNeutral":"gameLatestItemNeutral";function CrashGame(e){let{className:t,history:a,setHistory:n,setPlayers:l,startTime:o,ownBet:i,gameState:u,committedEosBlock:m,...h}=e,d=(0,r.useRef)(null),g=(0,r.useRef)(null),y=(0,r.useRef)(null),Z=(0,r.useRef)(null),T=(0,r.useRef)(null),[k,L]=(0,r.useState)(0),[A,B]=(0,r.useState)(0),[E,F]=(0,r.useState)(!1),[R,K]=(0,r.useState)(!1),[O,D]=(0,r.useState)(!1),[M,W]=(0,r.useState)(!1),[H,q]=(0,r.useState)(0),[z,X]=(0,r.useState)(0),[J,Y]=(0,r.useState)(1),[U,Q]=(0,r.useState)(""),[V,$]=(0,r.useState)(1),[ee,et]=(0,r.useState)(0),[ea,es]=(0,r.useState)(I),[er,en]=(0,r.useState)(N),[el,eo]=(0,r.useState)(!1),[ec,ei]=(0,r.useState)(!1),[eu,em]=(0,r.useState)(5e3),[eh,ed]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{function setSizes(){var e;let t={width:null==(e=d.current)?void 0:e.clientWidth,height:null==e?void 0:e.clientHeight};B(Math.floor(.826*t.width)),L(Math.floor(.826*t.width*.421))}return setSizes(),window.addEventListener("resize",setSizes),()=>{window.removeEventListener("resize",setSizes)}},[]),(0,r.useEffect)(()=>{let e;if(!0===O&&K(!1),!1===R)return;let t=0,a=0!==z||z?z:Date.now();X(a);let s=0,r=0,l=0,o=0;function gameElapsed(e){o=e,r=parseFloat((r=(s=parseFloat((100*Math.pow(Math.E,6e-5*e)/100).toFixed(4)))<3?(s-1)/2:1).toFixed(4)),l=Date.now()}function gameEnd(t){window.clearInterval(e),e=0,o=-1,console.log("game end with "+t.crashPoint+" and type is "+typeof t.crashPoint),"number"==typeof t.crashPoint&&void 0!==t.crashPoint&&Y(t.crashPoint),D(!0),n(e=>(t.historyClassName=setHistoryClassName(t),e.length>=7?[...e.slice(1,e.length),t]:[...e,t]))}let crashAnimation=()=>{if(u!==S.InProgress)return;q(r),Y(s);let e=(Date.now()-a)/1e3;if(e>18){let t=1-(e-18)*.02;$(Math.max(t,.5)),et((e-18)*20)}else $(1),et(0);t=requestAnimationFrame(crashAnimation)};return e=setInterval(function(){if(R&&0!=l&&u==S.InProgress){let e=Date.now()-l;gameElapsed(o+=e),l=Date.now()}},50),t=requestAnimationFrame(crashAnimation),c.KP.on("game-elapsed",gameElapsed),c.KP.on("game-end",gameEnd),()=>{c.KP.off("game-elapsed",gameElapsed),c.KP.off("game-end",gameEnd),window.clearInterval(e),window.cancelAnimationFrame(t)}},[R,O]),(0,r.useEffect)(()=>{u===S.Starting&&(Y(1),W(!0)),u===S.InProgress&&K(!0)},[u]),(0,r.useEffect)(()=>{var e,t;if(!R)return;let a=Math.floor((Date.now()-z)/1e3),s=null===(e=g.current)||void 0===e?void 0:e.childNodes,r=parseFloat(J.toFixed(1)),n=null===(t=y.current)||void 0===t?void 0:t.childNodes,l=G.default;J>12&&(l=G.medium);let o=[...ea],c=[...er];a>18&&a%3==0&&(o=getChartLabels(7,a+3,3))[0]!==ea[0]&&ea!==o&&(null==s||s.forEach((e,t)=>{var a,r;let n=-1*((null!==(r=null===(a=g.current)||void 0===a?void 0:a.clientWidth)&&void 0!==r?r:0)/5)+6;ec||p.ZP.fromTo(e,{x:0,opacity:t===s.length-1?0:1},{x:n,opacity:0===t?0:1,duration:.3,onStart:()=>{0===t&&ei(!0)},onComplete:()=>{6===t&&setTimeout(()=>{s.forEach(e=>p.ZP.set(e,{x:0,opacity:1})),es(o),ei(!1)},0)}})})),r>3&&r*(.2===l?10:1)%2==0&&(c=getChartLabels(8,r+l,l))[0]!==er[0]&&er!==c&&(null==n||n.forEach((e,t)=>{var a,s;let r=(null!==(s=null===(a=y.current)||void 0===a?void 0:a.clientHeight)&&void 0!==s?s:0)/6-4;el||p.ZP.fromTo(e,{y:0,opacity:t===n.length-1?0:1},{y:r,opacity:0===t?0:1,duration:.3,onStart:()=>{0===t&&eo(!0)},onComplete:()=>{7===t&&setTimeout(()=>{n.forEach(e=>p.ZP.set(e,{y:0,opacity:1})),en(c),eo(!1)},0)}})}))},[J]),(0,r.useEffect)(()=>{if(H<=0||H>=1){Q("translateY(0px) rotate(0deg) scale(1)");return}let e=0,t=(1-H)*45,a=H<=.05?.95+H:1;switch(!0){case H<.5:e=(.5+H)*(.13*A);break;case H>=.5&&H<=.7:e=.13*A;break;case H>.7:e=(1-H)*(3.33*(.13*A));break;default:console.error("Unreachable branch")}Q("translate(".concat(ee,"px, ").concat(parseFloat(e.toFixed(1)),"px) rotate(").concat(parseFloat(t.toFixed(2)),"deg) scale(").concat(parseFloat(a.toFixed(3)),")"))},[H,A,ee]),(0,r.useEffect)(()=>{let pingListener=e=>{let t=new Date().getTime()-e;em(t)};c.KP.emit("ping-req",new Date().getTime());let e=setInterval(()=>{c.KP.emit("ping-req",new Date().getTime())},1e3);return c.KP.on("ping-back",pingListener),()=>{c.KP.off("ping-back",pingListener),clearInterval(e)}},[]),(0,r.useEffect)(()=>{!0===M&&(K(!1),D(!1),W(!1),X(0),Y(1),q(0),es(I),en(N),Q(""),eo(!1),ei(!1))},[M]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{ref:d,className:_()(x().crashGame,t),...h,children:[(0,s.jsx)("div",{className:x().crashGameChartAnimation,children:(0,s.jsx)("div",{style:{width:"".concat(parseFloat((A*H).toFixed(1)),"px"),height:"".concat(parseFloat((k*H).toFixed(1)),"px"),transform:"scale(".concat(V,")"),transformOrigin:"top left"},className:x().crashGameChartContainer,ref:Z,children:(R||O)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:x().crashGameChartContainerWrapper,children:(0,s.jsx)("div",{style:{width:"".concat(A,"px"),height:"".concat(k,"px")},className:x().crashGameChartInner,ref:T})}),(0,s.jsx)("div",{style:{width:"".concat(Math.floor(.29*A),"px"),height:"".concat(Math.floor(.3045*A),"px"),top:"-".concat(Math.floor(.44*k),"px"),right:"-".concat(Math.floor(.17*A),"px"),transform:U,opacity:H>0?1:0},className:_()(x().crashGameChartRocket,O&&x().isCrashed),children:(0,s.jsx)("div",{className:x().crashGameChartRocketWrapper,children:(0,s.jsxs)("div",{className:x().crashGameChartRocketFire,children:[(0,s.jsx)("div",{className:_()(x().flameRed,x().flame)}),(0,s.jsx)("div",{className:_()(x().flameOrange,x().flame)}),(0,s.jsx)("div",{className:_()(x().flameYellow,x().flame)}),(0,s.jsx)("div",{className:_()(x().flameWhite,x().flame)}),(0,s.jsx)("div",{className:_()(x().flameBlue,x().circle)})]})})})]})})}),(0,s.jsx)(C.Z,{historyValues:a,className:""}),(0,s.jsxs)(f.Z,{className:_()(x().crashGameStatus),element:"p",textType:"regular16",children:["Network status"," ",(0,s.jsx)("span",{className:eu<=300?x().crashGameStatusPerfect:eu<=500?x().crashGameStatusGood:eu<=1e3?x().crashGameStatusMedium:x().crashGameStatusBad})]}),u==S.Starting?(0,s.jsxs)("div",{className:_()(x().crashGameCoefficient),style:u==S.Starting&&m>0?{fontSize:"4rem"}:{},children:[(0,s.jsx)(P.ZP,{date:o,renderer:e=>{let{minutes:t,seconds:a,completed:s}=e;return s&&m>0?"# "+m:"".concat(t,":").concat(a<10?"0"+a:a)}},o),(0,s.jsx)(f.Z,{className:x().crashGameCoefficientSubtitle,element:"p",textType:"smHeadlines",children:u==S.Starting&&m>0?"Waiting for EOS block to be mined...":"Starting..."})]}):u==S.InProgress||u==S.Over?i?(0,s.jsxs)("div",{className:_()(x().crashGameCoefficient,O&&i.status!=w.CashedOut&&x().isCrashed,i.status==w.CashedOut&&x().isCashed),children:[J.toFixed(2),"x"," ",(0,s.jsxs)(f.Z,{className:x().crashGameCoefficientSubtitle,element:"p",textType:"smHeadlines",children:["+"," ",i.status===w.Playing?(0,b.Z)((0,v.Z)((i.betAmount*J).toFixed(7))):(0,b.Z)((0,v.Z)(i.winningAmount.toFixed(7)))," ",(0,s.jsx)(j.Z,{className:O&&i.status!=w.CashedOut?x().robuxCurrencyCrashed:i.status==w.CashedOut?x().robuxCurrencyCashed:x().robuxCurrency})]})]}):(0,s.jsxs)("div",{className:_()(x().crashGameCoefficient,O&&x().isCrashed),children:[J.toFixed(2),"x"," ",(0,s.jsx)(f.Z,{className:x().crashGameCoefficientSubtitle,element:"p",textType:"smHeadlines",children:"Current payout"})]}):void 0,(0,s.jsx)("div",{className:x().crashGameTimes,ref:g,children:ea.map((e,t)=>(0,s.jsxs)(f.Z,{style:{transform:"none"},textType:"regular16",element:"span",children:[e,"s"]},t))}),(0,s.jsx)("div",{className:x().crashGameCoefficients,ref:y,children:er.map((e,t)=>(0,s.jsxs)(f.Z,{style:{transform:"none"},textType:"regular16",element:"span",children:[e.toFixed(1),"x"]},t))})]})})}var Z=a(27982),T=a(25545),k=a(83480);function CrashPlayers(e){let{className:t,players:a,...n}=e,[l,o]=(0,r.useState)(!1);return(0,s.jsx)("div",{className:_()("gameBlock gamePlayers gamePlayersScrollable",x().crashPlayers,t),...n,children:(0,s.jsxs)("div",{className:_()("gamePlayersScroller"),children:[(0,s.jsxs)("table",{className:_()("gamePlayersTable",!l&&"gamePlayersTableHidden"),children:[(0,s.jsx)("thead",{className:_()("gamePlayersTableHead"),children:(0,s.jsxs)("tr",{className:_()("gamePlayersTableRow"),children:[(0,s.jsx)("td",{className:_()("gamePlayersTableItem"),children:(0,s.jsxs)(Z.Z,{element:"h3",children:[a.length," Players"]})}),(0,s.jsx)("td",{className:_()("gamePlayersTableItem")}),(0,s.jsx)("td",{className:_()("gamePlayersTableItem")}),(0,s.jsx)("td",{className:_()("gamePlayersTableItem"),children:(0,s.jsxs)(f.Z,{element:"p",textType:"regular14",children:[(0,b.Z)((0,v.Z)(a.map(e=>e.betAmount).reduce((e,t)=>e+t,0)))," ",(0,s.jsx)(j.Z,{})]})})]})}),(0,s.jsx)("tbody",{className:_()("gamePlayersTableBody"),children:a.sort((e,t)=>t.betAmount-e.betAmount).map(e=>(0,s.jsxs)("tr",{className:_()("gamePlayersTableRow"),children:[(0,s.jsx)("td",{className:_()("gamePlayersTableItem gamePlayersTableUser"),children:(0,s.jsxs)(f.Z,{element:"p",textType:"regular14",children:[(0,s.jsx)(T.Z,{className:_()("gamePlayersTableItemAvatar"),userId:e.playerID,isPrivateMode:"anonymous"===e.username.toLowerCase(),imageAlt:"User avatar",boxSize:"medium"})," ",(0,s.jsx)("span",{children:e.username})]})}),(0,s.jsx)("td",{className:_()("gamePlayersTableItem gamePlayersTableItemCoeff"),children:(0,s.jsx)(f.Z,{element:"p",style:{width:"3em"},textType:"textNumber",children:e.stoppedAt&&(0,s.jsxs)(s.Fragment,{children:[(e.stoppedAt/100).toFixed(2),(0,s.jsx)("span",{children:"X"})]})})}),(0,s.jsx)("td",{className:_()("gamePlayersTableItem gamePlayersTableItemAmount"),children:(0,s.jsx)(f.Z,{style:{color:"#05d3dd"},element:"p",textType:"semibold14",children:e.winningAmount&&(0,s.jsxs)(s.Fragment,{children:[(0,b.Z)((0,v.Z)(e.winningAmount)),(0,s.jsx)(j.Z,{className:"temp"})]})})}),(0,s.jsx)("td",{className:_()("gamePlayersTableItem gamePlayersTableItemAmount"),children:(0,s.jsx)(f.Z,{element:"p",textType:"semibold14",children:e.betAmount&&(0,s.jsxs)(s.Fragment,{children:[(0,b.Z)((0,v.Z)(e.betAmount)),(0,s.jsx)(j.Z,{})]})})})]},e.playerID))})]}),(0,s.jsx)(k.Z,{onClick:()=>o(!l),variant:"secondary",className:_()("gamePlayersExpand"),children:l?"Show Less":"Show more"})]})})}var L=a(97787),A=a(37564),B=a(48999),E=a(11496),F=a(62484);let R=(0,E.ZP)(e=>{let{className:t,...a}=e;return(0,s.jsx)(A.Z,{...a,classes:{popper:t}})})({["& .".concat(B.Z.tooltip)]:{maxWidth:500,backgroundColor:"#353b61",fontWeight:500}});function CrashBet(e){let{maxProfit:t,user:a,joining:n,gameState:l,setJoining:o,setPlannedBet:i,plannedBet:h,imagesLoaded:d,cashedOut:g,betting:p,autoCashoutTarget:y,setAutoCashoutTarget:C,autoCashoutEnabled:P,setAutoCashoutEnabled:j,betAmount:w,setBetAmount:G,autoBetEnabled:I,className:N,setAutoBetEnabled:Z,currentGame:T,...A}=e,B=(0,u.I0)(),requestBetAmountChange=e=>{n||p||h||G(e)},requestAutocashoutChange=e=>{n||p||h||C(e)};return(0,r.useEffect)(()=>()=>{},[]),(0,s.jsxs)("div",{className:_()("gameBlock gameBet",x().crashBet,N),...A,children:[(0,s.jsxs)("div",{className:_()("gameBetTabs"),style:{display:"flex",justifyContent:"space-between"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(k.Z,{variant:"tab",isActive:!I,onClick:()=>Z(!1),children:"Manual"}),(0,s.jsx)(k.Z,{variant:"tab",isActive:I,onClick:()=>Z(!0),children:"Auto"})]}),(0,s.jsxs)("div",{className:"info-wrapper",style:{display:"flex",gap:"1em"},children:[(0,s.jsx)(k.Z,{onClick:()=>B({type:m.hj,payload:"Crash"}),variant:"betOption",style:{height:"30.2px"},children:(0,s.jsx)(F.Z,{style:{height:".8em"}})}),(0,s.jsx)(k.Z,{variant:"betOption",onClick:()=>{T&&B({type:m.LE,payload:{...T,gameName:"crash"}})},children:"Fairness"}),(0,s.jsx)(R,{title:(0,s.jsx)("p",{style:{fontSize:"12px"},children:t?"R$ ".concat((0,b.Z)((0,v.Z)(t))," Max Profit"):"Loading.."}),children:(0,s.jsx)(k.Z,{variant:"betOption",children:"Max profit"})})]})]}),(0,s.jsxs)("div",{style:{padding:"0"},className:_()("customInput","gameBetInput"),children:[(0,s.jsx)(f.Z,{element:"p",textType:"labelsRegular",className:_()("customInputLabel"),children:"Bet amount"}),(0,s.jsxs)("div",{className:_()("customInputInner"),children:[(0,s.jsx)(L.Z,{hasCurrencyIcon:!0,onChange:e=>requestBetAmountChange(e.currentTarget.value),value:w}),(0,s.jsxs)("div",{className:_()("customInputInnerButtons"),children:[(0,s.jsx)(k.Z,{variant:"inputButton",onClick:()=>requestBetAmountChange(Math.floor(w/2)),children:"1/2"}),(0,s.jsx)(k.Z,{variant:"inputButton",onClick:()=>requestBetAmountChange(Math.floor(2*w)),children:"2x"}),(0,s.jsx)(k.Z,{variant:"inputButton",onClick:()=>requestBetAmountChange(Math.floor(a.wallet+a.bonusWallet)),children:"Max"})]})]})]}),(0,s.jsxs)("div",{className:_()(x().cashoutWrapper,"customInput","gameBetInput"),children:[(0,s.jsx)(f.Z,{element:"p",textType:"labelsRegular",className:_()("customInputLabel"),children:"Auto cashout (multiplier)"}),(0,s.jsxs)("div",{className:_()("customInputInner"),children:[(0,s.jsx)(L.Z,{onChange:e=>requestAutocashoutChange(e.currentTarget.value),value:y}),(0,s.jsxs)("div",{className:_()("customInputInnerButtons"),children:[(0,s.jsx)(k.Z,{variant:"inputButton",onClick:()=>requestAutocashoutChange(""),children:"Disable"}),(0,s.jsx)(k.Z,{variant:"inputButton",onClick:()=>requestAutocashoutChange("2"),children:"2.00x"}),(0,s.jsx)(k.Z,{variant:"inputButton",onClick:()=>requestAutocashoutChange("10"),children:"10.00x"})]})]})]}),(0,s.jsx)("div",{className:x().buttonWrapper,children:p?(0,s.jsx)(k.Z,{onClick:()=>c.KP.emit("bet-cashout"),variant:g?"secondary":"danger",className:_()("gameBetSubmit","mobileBottomMargin"),children:g?"Cashed out":"Cashout"}):(0,s.jsx)(k.Z,{onClick:()=>{0>=parseFloat(w)||(console.log("game state is "+l),l===S.Starting?(o(!0),c.KP.emit("join-game",{autoCashoutPoint:y>0?100*parseFloat(y):-1,betAmount:parseFloat(w)})):h?(console.log("cancelling"),i(!1)):I||(console.log("set planned bet true"),i(!0)))},disabled:!d||n||I,variant:"primary",className:_()("gameBetSubmit","mobileBottomMargin"),children:n?"Joining...":h?"Cancel bet":l===S.InProgress?"Join next game":"Join game"})})]})}var K=(0,u.$j)(e=>({user:e.auth.user,isAuthenticated:e.auth.isAuthenticated,fflags:e.fflags}))(e=>{let{user:t,isAuthenticated:a,...n}=e,[g,_]=(0,r.useState)([]),[p,f]=(0,r.useState)(1),[y,x]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[v,w]=(0,r.useState)(null),[G,I]=(0,r.useState)(!1),[N,Z]=(0,r.useState)(!1),[T,k]=(0,r.useState)(!1),[L,A]=(0,r.useState)("30"),[B,E]=(0,r.useState)(""),[F,R]=(0,r.useState)(0),[K,O]=(0,r.useState)(0),[D,M]=(0,r.useState)([]),[W,H]=(0,r.useState)(),[q,z]=(0,r.useState)(null),X=(0,u.I0)();return(0,r.useEffect)(()=>{let fetchData=async()=>{try{let e=await (0,d.NP)();R(new Date(e.current.startingAt)),e.current.players&&_(e.current.players),e.current.status&&f(e.current.status),O(e.current.commitedEosBlock),H(e.current),z(e.options.maxProfit),M(e.history.reverse().map(e=>({...e,historyClassName:setHistoryClassName(e)})).slice(-7)),await loadImages(["/items/crash/chart.png","/items/crash/rocket.png","/items/crash/rocket-explosion.svg"]),Z(!0)}catch(e){console.log("There was an error while loading crash schema:",e)}};fetchData()},[]),(0,r.useEffect)(()=>{let fetchData=async()=>{try{let e=await (0,d.Fz)();e.bet&&(b(!0),w(e.bet))}catch(e){console.log("There was an error while loading crash schema:",e)}};a&&fetchData()},[a]),(0,r.useEffect)(()=>{let addNewPlayer=e=>{_(t=>{let a=t.findIndex(t=>{let{playerID:a}=t;return a===e.playerID});return -1!==a?t:[...t,e]})},gameBets=e=>{i.ZP.forEach(e,e=>addNewPlayer(e))},gameStart=e=>{R(Date.now()),H(t=>({...t,publicSeed:e.publicSeed})),f(S.InProgress)},gameStarting=e=>{_([]),H(t=>({...null!=t?t:{},_id:e._id,privateHash:e.privateHash})),R(new Date(Date.now()+e.timeUntilStart)),w(null),f(S.Starting),O(!1),b(!1),(N&&y||C)&&(k(!0),c.KP.emit("join-game",{autoCashoutPoint:B>0?100*parseFloat(B):-1,betAmount:parseFloat(L)}),C&&(console.log("cancelling planned bet"),P(!1)))},gameEnd=e=>{H(!1),f(S.Over),I(!1)},betCashout=e=>{null!=t&&e.playerID===t.robloxId&&(I(!0),w(Object.assign(v,e)),setTimeout(()=>{b(!1)},1500)),_(t=>t.map(t=>t.playerID===e.playerID?Object.assign(t,e):t))},joinError=e=>{e.includes("afford this")&&(console.debug("show deposit modal"),X({type:m.Mr,shouldSendEvent:!0})),k(!1),h.ZP.error(e)},joinSuccess=e=>{k(!1),w(e),b(!0),l.ZP.event({category:"Crash game",action:"Joined crash game",value:null!=e?e:0}),h.ZP.success("Successfully joined the game!")},cashoutError=e=>{h.ZP.error(e)},cashoutSuccess=()=>{h.ZP.success("Successfully cashed out!"),setTimeout(()=>{b(!1)},1500)};return c.KP.on("game-bets",gameBets),c.KP.on("game-start",gameStart),c.KP.on("game-end",gameEnd),c.KP.on("game-starting",gameStarting),c.KP.on("bet-cashout",betCashout),c.KP.on("game-join-error",joinError),c.KP.on("game-join-success",joinSuccess),c.KP.on("bet-cashout-error",cashoutError),c.KP.on("bet-cashout-success",cashoutSuccess),c.KP.on("eos-commit",O),()=>{c.KP.off("game-bets",gameBets),c.KP.off("game-start",gameStart),c.KP.on("game-end",gameEnd),c.KP.off("game-starting",gameStarting),c.KP.off("bet-cashout",betCashout),c.KP.off("game-join-error",joinError),c.KP.off("game-join-success",joinSuccess),c.KP.off("bet-cashout-error",cashoutError),c.KP.off("bet-cashout-success",cashoutSuccess),c.KP.off("eos-commit",O)}},[p,C,y,N,B,L,v,t]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.Z,{...n,children:[(0,s.jsxs)(o.Z.Column,{type:"left",children:[(0,s.jsx)(CrashBet,{maxProfit:q,imagesLoaded:N,currentGame:W,autoBetEnabled:y,setAutoBetEnabled:x,joining:T,setJoining:k,plannedBet:C,betting:j,cashedOut:G,gameState:p,setPlannedBet:P,autoCashoutTarget:B,setAutoCashoutTarget:E,betAmount:L,setBetAmount:A,user:t,style:{animation:"bottomTop .3s"}}),(0,s.jsx)(CrashPlayers,{style:{animation:"bottomTop .5s"},players:g})]}),(0,s.jsx)(o.Z.Column,{customMobileOrder:"-1",type:"right",children:(0,s.jsx)(CrashGame,{style:{animation:"bottomTop .7s"},gameState:p,history:D,startTime:F,committedEosBlock:K,ownBet:v,setHistory:M,setPlayers:_})})]})})});function CrashPage(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(K,{})})}CrashPage.getLayout=function(e){return(0,s.jsx)(n.Z,{children:e})}},76633:function(e){e.exports={gameLayout:"game-layout_gameLayout__bgIOR",gameLayoutColumnRow:"game-layout_gameLayoutColumnRow__0wXiL",gameLayoutColumn:"game-layout_gameLayoutColumn__q01vS",gameLayoutColumnLeft:"game-layout_gameLayoutColumnLeft__55fuZ",gameLayoutColumnRight:"game-layout_gameLayoutColumnRight__oj_7g",gameLayoutColumnAnotherLeft:"game-layout_gameLayoutColumnAnotherLeft__uOx3g",gameLayoutColumnAnotherRight:"game-layout_gameLayoutColumnAnotherRight__j_wQx"}},42833:function(e){e.exports={crashGame:"crash_crashGame__8up4O",robuxCurrency:"crash_robuxCurrency__btK5a",robuxCurrencyCashed:"crash_robuxCurrencyCashed__4psW1",robuxCurrencyCrashed:"crash_robuxCurrencyCrashed__Vc2uM",crashGameTimes:"crash_crashGameTimes__JiAFS",crashGameChart:"crash_crashGameChart__VxmCc",crashGameChartAnimation:"crash_crashGameChartAnimation__sbyXi",crashGameChartContainer:"crash_crashGameChartContainer__RhVBY",crashGameChartContainerWrapper:"crash_crashGameChartContainerWrapper__0L_8T",crashGameChartInner:"crash_crashGameChartInner__XD2_W",crashGameChartRocket:"crash_crashGameChartRocket__XXCtf",isCrashed:"crash_isCrashed__SZ7Ki",crashGameChartRocketWrapper:"crash_crashGameChartRocketWrapper__vEci_",rocketFlicker:"crash_rocketFlicker__5xfCp",crashGameChartRocketFire:"crash_crashGameChartRocketFire__J1jTZ",flicker:"crash_flicker__mvwmZ",flame:"crash_flame__G3aBw",flameYellow:"crash_flameYellow__uwrG7",flameOrange:"crash_flameOrange__iNHsG",flameRed:"crash_flameRed__Zkwy9",flameWhite:"crash_flameWhite__vkGOJ",flameBlue:"crash_flameBlue__hUbiQ",circle:"crash_circle__DbmKx",crashGameCoefficients:"crash_crashGameCoefficients__w1meu",crashGameCoefficient:"crash_crashGameCoefficient___OC_b",crashGameCountdown:"crash_crashGameCountdown__M57_m",crashGameCoefficientSubtitle:"crash_crashGameCoefficientSubtitle__Amh76",crashGameCountdownSubtitle:"crash_crashGameCountdownSubtitle__fR8k_",isCashed:"crash_isCashed__9GOJR",crashGameStatus:"crash_crashGameStatus__2FrTA",crashGameStatusPerfect:"crash_crashGameStatusPerfect__PYJUo",ripple:"crash_ripple__wHZkS",crashGameStatusGood:"crash_crashGameStatusGood__SzwwH",crashGameStatusMedium:"crash_crashGameStatusMedium__P_UbU",crashGameStatusBad:"crash_crashGameStatusBad__VcGki",crashBet:"crash_crashBet__otdiy",cashoutWrapper:"crash_cashoutWrapper__onmyx",buttonWrapper:"crash_buttonWrapper__Q4m64",crashPlayers:"crash_crashPlayers__msMym"}},11706:function(e){e.exports={rouletteGame:"roulette_rouletteGame__60JcH",rouletteGameLatest:"roulette_rouletteGameLatest__LhUg4",rouletteGameStatus:"roulette_rouletteGameStatus__bDP2x",rouletteGameTrack:"roulette_rouletteGameTrack__Gy3SC",rouletteGameTrackInner:"roulette_rouletteGameTrackInner__z_usk",rouletteGameTrackItem:"roulette_rouletteGameTrackItem__Dvguo",isWin:"roulette_isWin__jZsDR",rouletteGameTrackItemYellow:"roulette_rouletteGameTrackItemYellow__SO6Fe",rouletteGameTrackItemRed:"roulette_rouletteGameTrackItemRed__dSEzZ",rouletteGameTrackItemPurple:"roulette_rouletteGameTrackItemPurple__wRH_J",rouletteGameAmount:"roulette_rouletteGameAmount__hHF2j",rouletteGameAmountInput:"roulette_rouletteGameAmountInput__u_Qwt",rouletteGameInfo:"roulette_rouletteGameInfo__Rwy4c",roulettePlayers:"roulette_roulettePlayers__pRhtK",roulettePlayersColumn:"roulette_roulettePlayersColumn__iBsQD",yellow:"roulette_yellow__Eykdl",red:"roulette_red__VdQkc",purple:"roulette_purple__Bqk8z",roulettePlayersColumnBet:"roulette_roulettePlayersColumnBet__cMNoI",roulettePlayersColumnList:"roulette_roulettePlayersColumnList__1P8kU",roulettePlayersColumnItem:"roulette_roulettePlayersColumnItem__PD_XB",roulettePlayersColumnItemPlayer:"roulette_roulettePlayersColumnItemPlayer__gWklH",roulettePlayersColumnItemAmount:"roulette_roulettePlayersColumnItemAmount__lOTx6",roulettePlayersColumnItemPlayerAvatar:"roulette_roulettePlayersColumnItemPlayerAvatar__oTsB5",roulettePlayersColumnItemPlayerName:"roulette_roulettePlayersColumnItemPlayerName__lTQqL",rouletteBet:"roulette_rouletteBet__bwqE5"}}},function(e){e.O(0,[4885,8802,2252,990,9038,6107,9774,2888,179],function(){return e(e.s=63781)}),_N_E=e.O()}]);