(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8907],{41359:function(e,t,a){"use strict";var s,i=a(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",_extends({width:12,height:12,xmlns:"http://www.w3.org/2000/svg"},e),s||(s=i.createElement("path",{d:"M9.153 1a.576.576 0 0 0-.4.167L7.736 2.175 9.82 4.258l1.017-1.008a.563.563 0 0 0 0-.792L9.545 1.167A.557.557 0 0 0 9.153 1ZM7.144 2.767 1 8.917V11h2.084l6.144-6.15-2.084-2.083Z"})))}},20612:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/affiliates",function(){return a(21557)}])},21557:function(e,t,a){"use strict";a.r(t),a.d(t,{Affiliates:function(){return Affiliates},default:function(){return O}});var s,i,l,n=a(85893),r=a(67294),c=a(13021),f=a(69316),o=a(27982),d=a(70657),m=a.n(d),h=a(66713);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var copy=function(e){return r.createElement("svg",_extends({width:12,height:12,xmlns:"http://www.w3.org/2000/svg"},e),s||(s=r.createElement("path",{d:"M2.775 2.25v.1H3.6v-.1c0-.29.236-.525.525-.525H9.75c.29 0 .525.235.525.525v5.625c0 .29-.235.525-.525.525h-.1v.825h.1a1.35 1.35 0 0 0 1.35-1.35V2.25A1.35 1.35 0 0 0 9.75.9H4.125a1.35 1.35 0 0 0-1.35 1.35Zm5.1.525H2.25A1.35 1.35 0 0 0 .9 4.125V9.75c0 .745.604 1.35 1.35 1.35h5.625a1.35 1.35 0 0 0 1.35-1.35V4.125a1.35 1.35 0 0 0-1.35-1.35ZM8.4 9.75c0 .29-.235.525-.525.525H2.25a.526.526 0 0 1-.525-.525V4.125c0-.29.236-.525.525-.525h5.625c.29 0 .525.235.525.525V9.75Z"})))},u=a(41359);function floppy_extends(){return(floppy_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var floppy=function(e){return r.createElement("svg",floppy_extends({xmlns:"http://www.w3.org/2000/svg",height:12,width:12,viewBox:"0 0 370.571 370.571",style:{enableBackground:"new 0 0 370.571 370.571"},xmlSpace:"preserve"},e),i||(i=r.createElement("path",{d:"M291.785 0H0v370.571h370.571V78.787L291.785 0zM100 30h170.571v50H100V30zm170.571 310.571H100V200.286h170.571v140.285zm70 0h-40V170.286H70v170.286H30V30h40v80h230.571V51.213l40 40v249.358z"})))};function xsymbol_extends(){return(xsymbol_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var xsymbol=function(e){return r.createElement("svg",xsymbol_extends({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.707 1.707A1 1 0 0 0 12.293.293L7 5.586 1.707.293A1 1 0 0 0 .293 1.707L5.586 7 .293 12.293a1 1 0 1 0 1.414 1.414L7 8.414l5.293 5.293a1 1 0 0 0 1.414-1.414L8.414 7l5.293-5.293Z",fill:"#5F6892"})))},p=a(2664),x=a(34558),g=a(86501),v=a(83480),j=a(17857),y=a(40975),Z=a(64709),b=a(97787),A=a(94184),w=a.n(A),T=a(25545),_=a(85448),S=a.n(_),N=a(69067),k=a(58060),B=a(5994);function AffiliatesStatistics(e){let{players:t,className:a,...s}=e,[i,l]=(0,r.useState)(6),[c,o]=(0,r.useState)(0),[d,m]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(m(t.sort((e,t)=>t.wager-e.wager)),o(t.length),p((0,k.Z)(t,i,1)))},[t]);let{items:x}=(0,N.Z)({count:Math.ceil(c/i),onChange:(e,t)=>{p((0,k.Z)(d,i,t)),console.log("changed page")}});return(0,n.jsxs)("div",{className:w()(S().statistics,S().affiliatesStatistics,a),...s,children:[(0,n.jsx)("div",{className:S().statisticsHeader,children:(0,n.jsx)(f.Z,{element:"p",textType:"smHeadlines",className:S().statisticsHeaderTitle,children:"Affiliated users"})}),(0,n.jsxs)("table",{className:S().statisticsTable,children:[(0,n.jsx)("thead",{className:S().statisticsTableHead,children:(0,n.jsxs)("tr",{className:S().statisticsTableRow,children:[(0,n.jsx)("td",{className:S().statisticsTableItem,style:{width:"320px"},children:(0,n.jsx)(f.Z,{element:"p",textType:"regular14",children:"Username"})}),(0,n.jsx)("td",{className:S().statisticsTableItem,children:(0,n.jsx)(f.Z,{element:"p",textType:"regular14",children:"Total wager"})}),(0,n.jsx)("td",{className:S().statisticsTableItem,children:(0,n.jsx)(f.Z,{element:"p",textType:"regular14",children:"Date and time"})})]})}),(0,n.jsx)("tbody",{className:S().statisticsTableBody,children:u&&u.map((e,t)=>(0,n.jsxs)("tr",{className:S().statisticsTableRow,children:[(0,n.jsx)("td",{className:w()(S().statisticsTableItem,S().statisticsTableItemUser),children:(0,n.jsxs)(f.Z,{element:"p",textType:"regular14",children:[(0,n.jsx)(T.Z,{className:S().statisticsTableItemAvatar,userId:e.robloxId,imageAlt:"User avatar",boxSize:"medium"}),e.username]})}),(0,n.jsx)("td",{className:w()(S().statisticsTableItem,S().statisticsTableItemAmount),children:(0,n.jsxs)(f.Z,{element:"p",textType:"semibold14",children:[(0,y.Z)((0,Z.Z)(e.wager))," ",(0,n.jsx)(h.Z,{})]})}),(0,n.jsx)("td",{className:w()(S().statisticsTableItem,S().statisticsTableItemAmount),children:(0,n.jsxs)(f.Z,{element:"p",textType:"semibold14",children:[(0,B._l)(e.created)," ",(0,n.jsx)(h.Z,{})]})})]}))})]}),(0,n.jsx)("div",{className:S().statisticsPagination,children:x.map((e,t)=>{let{page:a,type:s,selected:i,...l}=e,r=null;if("start-ellipsis"===s||"end-ellipsis"===s)r=(0,n.jsxs)(v.Z,{variant:"pagination",disabled:!0,children:[a,"..."]});else if("page"===s)r=(0,n.jsx)(v.Z,{variant:"pagination",isActive:i,...l,children:a});else{let e=s;"previous"===e&&(e="prev"),r=(0,n.jsx)(v.Z,{variant:"default",className:S().statisticsPaginationLast,...l,children:e})}return[r]})})]})}var C=a(19870),E=a(62557);let formattingFn=e=>(0,y.Z)((0,Z.Z)(e)),Affiliates=e=>{let{isAuthenticated:t}=e,a=(0,p.I0)(),[s,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),[d,y]=(0,r.useState)(!1),[Z,A]=(0,r.useState)("Loading..."),[w,T]=(0,r.useState)(""),updateAffiliateCode=async()=>{var e,t,s;try{let t=await (0,x.aK)(w);if(c(!1),t.success){i(e=>e?{...e,affiliateCode:t.newAffiliateCode}:null),A(t.newAffiliateCode);let s=null!==(e=E.Z.getState().auth.affiliate)&&void 0!==e?e:{};a({type:C.KV,payload:{...s,affiliateCode:t.newAffiliateCode}}),g.Am.success("Successfully updated your affiliate code!")}}catch(e){(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.msg)?g.Am.error(e.response.data.msg):g.Am.error("Failed to update your affiliate link, are you connected to the internet?")}},handleClaimAff=async()=>{y(!0);try{let e=await (0,x.Ht)();console.log({affeliateResonse:e}),y(!1),i(e=>e?{...e,affiliateMoneyAvailable:0}:null),g.Am.success("Successfully claimed ".concat(e.claimedAmount," credits!"))}catch(e){if(y(!1),e.response&&e.response.data&&e.response.data.errors)for(let t=0;t<e.response.data.errors.length;t++){let a=e.response.data.errors[t];g.Am.error(a.msg)}else e.response&&e.response.data&&e.response.data.error?g.Am.error(e.response.data.error):g.Am.error("Failed to claim your robux, please contact support...")}};return(0,r.useEffect)(()=>{if(t){let fetchData=async()=>{try{let e=await (0,x.jT)();i(e),A(e.affiliateCode),T(e.affiliateCode)}catch(e){g.Am.error("There was an error while loading the affiliate stats, please refresh the page and try again!")}};fetchData()}},[t]),(0,n.jsxs)("section",{className:m().affiliates,children:[(0,n.jsxs)("div",{className:m().affiliatesStats,children:[(0,n.jsx)(o.Z,{element:"h1",className:m().affiliatesStatsTitle,children:"Affiliates"}),(0,n.jsxs)("div",{className:m().affiliatesStatsBlock,children:[(0,n.jsx)(f.Z,{element:"p",textType:"regular14",className:m().affiliatesStatsBlockTitle,children:"Affiliated users"}),(0,n.jsx)(o.Z,{element:"h1",as:"div",className:m().affiliatesStatsBlockContent,children:s&&(0,n.jsx)(j.ZP,{duration:1,formattingFn:formattingFn,end:s.usersAffiliated})})]}),(0,n.jsxs)("div",{className:m().affiliatesStatsBlock,children:[(0,n.jsx)(f.Z,{element:"p",textType:"regular14",className:m().affiliatesStatsBlockTitle,children:"Affiliate balance"}),(0,n.jsx)("div",{children:(0,n.jsxs)(o.Z,{element:"h1",as:"div",className:m().affiliatesStatsBlockContent,children:[s&&(0,n.jsx)(j.ZP,{duration:1,formattingFn:formattingFn,end:s.affiliateMoneyAvailable}),(0,n.jsx)(h.Z,{}),(0,n.jsx)(v.Z,{style:{height:"2em"},onClick:handleClaimAff,variant:"primary",children:d?"Claiming":"Claim"})]})})]}),(0,n.jsxs)("div",{className:m().affiliatesStatsBlock,children:[(0,n.jsx)(f.Z,{element:"p",textType:"regular14",className:m().affiliatesStatsBlockTitle,children:"Total earned"}),(0,n.jsxs)(o.Z,{element:"h1",as:"div",className:m().affiliatesStatsBlockContent,children:[s&&(0,n.jsx)(j.ZP,{duration:1,formattingFn:formattingFn,end:s.affiliateMoney})," ",(0,n.jsx)(h.Z,{})]})]}),(0,n.jsxs)("div",{className:m().affiliatesStatsBlock,children:[(0,n.jsx)(f.Z,{element:"p",textType:"regular14",className:m().affiliatesStatsBlockTitle,children:"Your affiliate code"}),(0,n.jsx)(f.Z,{element:"p",textType:"regular14",className:m().affiliatesStatsBlockContent,children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{style:{width:"50%"},onFocus:e=>e.target.select(),onKeyPress:e=>{"Enter"===e.key&&updateAffiliateCode()},className:m().modalListingSearch,onChange:e=>T(e.target.value),value:w}),(0,n.jsx)(v.Z,{onClick:updateAffiliateCode,style:{marginBottom:"0.5rem"},variant:"functional",className:m().modalDepositButton,children:(0,n.jsx)(floppy,{})}),(0,n.jsx)(v.Z,{onClick:()=>{c(!1),T(Z)},style:{marginBottom:"0.5rem"},variant:"functional",className:m().modalDepositButton,children:(0,n.jsx)(xsymbol,{})})]}):(0,n.jsxs)(n.Fragment,{children:[s&&s.affiliateCode,(0,n.jsx)(v.Z,{onClick:()=>c(!0),variant:"functional",children:(0,n.jsx)(u.Z,{})})]})})]}),(0,n.jsxs)("div",{className:m().affiliatesStatsBlock,children:[(0,n.jsx)(f.Z,{element:"p",textType:"regular14",className:m().affiliatesStatsBlockTitle,children:"Your affiliate link"}),(0,n.jsxs)(f.Z,{element:"p",textType:"regular14",className:m().affiliatesStatsBlockContent,children:["https://bloxflip.com/a/",Z,(0,n.jsx)(v.Z,{variant:"functional",onClick:()=>navigator.clipboard.writeText("https://bloxflip.com/a/".concat(Z)),children:(0,n.jsx)(copy,{})})]})]})]}),(0,n.jsxs)("div",{className:m().affiliatesColumn,children:[(0,n.jsxs)("div",{className:m().affiliatesBanner,children:[(0,n.jsxs)(o.Z,{className:m().affiliatesBannerTitle,element:"h3",children:["Earn ",(0,n.jsx)(h.Z,{})," from every wager with Affiliates"]}),(0,n.jsx)(f.Z,{element:"p",textType:"regular14",children:"Everyone you refer to will get a free Case!"})]}),(0,n.jsx)(AffiliatesStatistics,{players:null==s?void 0:s.affiliatedUsers})]})]})};Affiliates.getLayout=function(e){return(0,n.jsx)(c.Z,{excludeGlobalStatistics:!0,children:e})};var O=(0,p.$j)(e=>({user:e.auth.user,isAuthenticated:e.auth.isAuthenticated}))(Affiliates)},70657:function(e){e.exports={affiliates:"Affiliates_affiliates__cUPnM",affiliatesStats:"Affiliates_affiliatesStats__AqKvC",affiliatesStatsTitle:"Affiliates_affiliatesStatsTitle__QDSW_",affiliatesStatsBlockTitle:"Affiliates_affiliatesStatsBlockTitle__k1K4s",affiliatesStatsBlockContent:"Affiliates_affiliatesStatsBlockContent__Kgx3k",affiliatesStatsBlock:"Affiliates_affiliatesStatsBlock__YnF0J",affiliatesBanner:"Affiliates_affiliatesBanner__31cgk",affiliatesBannerTitle:"Affiliates_affiliatesBannerTitle__ZzmiJ"}}},function(e){e.O(0,[4885,2252,6107,9774,2888,179],function(){return e(e.s=20612)}),_N_E=e.O()}]);